"use strict";jQuery(document).ready(function(a){var e,t,o=!1;function s(){o=!1,a("#shared-counts-modal-recipient, #shared-counts-modal-name, #shared-counts-modal-email").val(""),a("#shared-counts-modal-wrap").fadeOut(),a("#shared-counts-modal-sent").hide()}a(document).on("click",".shared-counts-button",function(e){if("function"==typeof ga&&!0===shared_counts.social_tracking){var t=a(this).data("social-network"),o=a(this).data("social-action"),s=a(this).data("social-target");t&&o&&s&&ga("send","social",t,o,s)}}),a(document).on("click",'.shared-counts-button[target="_blank"]:not(.no-js)',function(e){e.preventDefault();var t="",o=this.href;switch(o.split("/")[2]){case"www.facebook.com":t="width=585,height=368";break;case"twitter.com":t="width=585,height=261";break;case"plus.google.com":t="width=517,height=511";break;case"pinterest.com":t="width=750,height=550";break;default:t="width=585,height=515"}window.open(o,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,"+t),a(this).trigger("shared-counts-click")}),a(document).on("click",'a[href*="#shared-counts-email"]',function(s){s.preventDefault(),o=!0,a("#shared-counts-modal-wrap").fadeIn(),a("#shared-counts-modal-recipient").focus(),e=a(this).data("postid"),t=a(this).data("nonce"),shared_counts.recaptchaSitekey&&grecaptcha.render("shared-counts-modal-recaptcha",{sitekey:shared_counts.recaptchaSitekey})}),a(document).on("click","#shared-counts-modal-close, #shared-counts-modal-wrap",function(e){("shared-counts-modal-wrap"!==a(this).attr("id")||a(e.target).is("#shared-counts-modal-wrap"))&&(e.preventDefault(),s())}),a(document).keyup(function(a){o&&27===a.keyCode&&s()}),a(document).on("click","#shared-counts-modal-submit",function(o){o.preventDefault();var n=!1,c=a(this),i=a("#shared-counts-modal-recipient"),r=a("#shared-counts-modal-name"),d=a("#shared-counts-modal-email"),l=a("#shared-counts-modal-validation"),h=a("#g-recaptcha-response"),u={action:"shared_counts_email",postid:e,recipient:i.val(),name:r.val(),email:d.val(),validation:l.val(),recaptcha:h.val(),nonce:t};a(i,r,d).each(function(){a(this).val()&&""!==a(this).val()||(n=!0)}),n?alert(shared_counts.email_fields_required):(a(this).prop("disabled",!0),a.post(shared_counts.ajaxurl,u,function(a){a.success&&(console.log(shared_counts.email_sent),s()),c.prop("disabled",!1)}).fail(function(a){console.log(a.responseText)}))})});